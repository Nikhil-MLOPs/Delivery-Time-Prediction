schema: '2.0'
stages:
  data_cleaning:
    cmd: python src/data/data_cleaning.py
    deps:
    - path: data/raw/swiggy.csv
      hash: md5
      md5: 55bd6cc42f2360b5de9569cf9cbd8342
      size: 7726618
    - path: src/data/data_cleaning.py
      hash: md5
      md5: 4be20345aa780407bf58a35c85529817
      size: 7828
    outs:
    - path: data/cleaned/clean_data.csv
      hash: md5
      md5: 80f606a07ed94eb9a7547baac506fdfd
      size: 4509147
  data_preparation:
    cmd: python src/data/data_preparation.py
    deps:
    - path: data/cleaned/clean_data.csv
      hash: md5
      md5: 80f606a07ed94eb9a7547baac506fdfd
      size: 4509147
    - path: src/data/data_preparation.py
      hash: md5
      md5: bba8d058879246851c1766a76d7c94d3
      size: 3003
    params:
      params.yaml:
        Data_Preparation.random_state: 42
        Data_Preparation.test_size: 0.25
    outs:
    - path: data/interim/test.csv
      hash: md5
      md5: 1643f3fe6cce4e36b87631d763ffd5f0
      size: 1126683
    - path: data/interim/train.csv
      hash: md5
      md5: 4a5c9393a16ea7144b6f0f3433118c97
      size: 3379548
  data_preprocessing:
    cmd: python src/features/data_preprocessing.py
    deps:
    - path: data/interim/test.csv
      hash: md5
      md5: 1643f3fe6cce4e36b87631d763ffd5f0
      size: 1126683
    - path: data/interim/train.csv
      hash: md5
      md5: 4a5c9393a16ea7144b6f0f3433118c97
      size: 3379548
    - path: src/features/data_preprocessing.py
      hash: md5
      md5: 282a57d7350e5168a56785a20873e912
      size: 6952
    outs:
    - path: data/processed/test_trans.csv
      hash: md5
      md5: 4f6716b5ecab7d0faeb6f68814be679e
      size: 1358366
    - path: data/processed/train_trans.csv
      hash: md5
      md5: f2265895a80ada1a3e396fb8442169f2
      size: 4060890
    - path: models/preprocessor.joblib
      hash: md5
      md5: ff052a66f595f04cbd8537c1d3a67d3b
      size: 7259
  train:
    cmd: python src/models/train.py
    deps:
    - path: data/processed/train_trans.csv
      hash: md5
      md5: f2265895a80ada1a3e396fb8442169f2
      size: 4060890
    - path: src/models/train.py
      hash: md5
      md5: 60f352a41fa39714250472def158fe49
      size: 4914
    params:
      params.yaml:
        Train.LightGBM:
          n_estimators: 49
          max_depth: 25
          learning_rate: 0.17754792549578896
          subsample: 0.8277333851158997
          min_child_weight: 17
          min_split_gain: 0.021248144717224082
          reg_lambda: 87.41752350223815
          n_jobs: -1
        Train.Random_Forest:
          n_estimators: 228
          criterion: squared_error
          max_depth: 17
          max_features: sqrt
          min_samples_split: 10
          min_samples_leaf: 1
          max_samples: 0.8260945842838456
          verbose: 1
          n_jobs: -1
    outs:
    - path: models/model.joblib
      hash: md5
      md5: 8aa4a33c0e400912138866a1afb8dfad
      size: 87021080
    - path: models/power_transformer.joblib
      hash: md5
      md5: beffe6d73ec545f56708489a3c3a604e
      size: 837
    - path: models/stacking_regressor.joblib
      hash: md5
      md5: f4cdb48e961c0afff67f0ff5f1e56c76
      size: 87013530
  evaluation:
    cmd: python src/models/evaluation.py
    deps:
    - path: data/processed/test_trans.csv
      hash: md5
      md5: 4f6716b5ecab7d0faeb6f68814be679e
      size: 1358366
    - path: data/processed/train_trans.csv
      hash: md5
      md5: f2265895a80ada1a3e396fb8442169f2
      size: 4060890
    - path: models/model.joblib
      hash: md5
      md5: 8aa4a33c0e400912138866a1afb8dfad
      size: 87021080
    - path: src/models/evaluation.py
      hash: md5
      md5: edf407beb068560fcf2f4f8020e99300
      size: 6025
    outs:
    - path: run_information.json
      hash: md5
      md5: 55b0e6eb3e9141b92a9d416c7c42a1fd
      size: 220
  register_model:
    cmd: python src/models/register_model.py
    deps:
    - path: run_information.json
      hash: md5
      md5: 55b0e6eb3e9141b92a9d416c7c42a1fd
      size: 220
    - path: src/models/register_model.py
      hash: md5
      md5: d5e5453613758ffbc93cc3d8d988d5a8
      size: 2146
